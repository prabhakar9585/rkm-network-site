<!DOCTYPE html>
<html>
<head>
    <title>Resolved Faults</title>
    <link rel="stylesheet" href="style.css">
    <script type="module">
        import { db } from "./firebase-init.js";
        import {
            collection,
            getDocs,
            query,
            where,
            orderBy
        } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        const container = document.getElementById("list");

        async function loadResolved() {
            const q = query(
                collection(db, "faults"),
                where("status", "==", "resolved"),
                orderBy("createdAt", "desc")
            );

            const snapshot = await getDocs(q);

            snapshot.forEach((docSnap) => {
                const data = docSnap.data();

                const div = document.createElement("div");
                div.className = "card";

                div.innerHTML = `
                    <p><b>Name:</b> ${data.name}</p>
                    <p><b>Landline:</b> ${data.landline}</p>
                    <p><b>Solution:</b> ${data.solution}</p>
                `;

                container.appendChild(div);
            });
        }

        window.onload = loadResolved;
    </script>
</head>
<body>

<header>
    <h2>Resolved Faults</h2>
</header>

<div id="list" class="vertical-list"></div>

</body>
</html>
