<!DOCTYPE html>
<html>
<head>
  <title>New Application</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>New Application</header>

<div class="main-content">
  <div class="form-box">
    <input id="name" placeholder="Full Name">
    <input id="mobile" placeholder="Mobile Number">
    <input id="alt" placeholder="Alternate Number">
    <textarea id="address" placeholder="Address"></textarea>
    <button id="submitBtn" disabled>Submit</button>
  </div>
</div>

<script type="module">
import { db } from "./firebase-init.js";
import { collection, addDoc, serverTimestamp } 
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const btn = document.getElementById("submitBtn");
const inputs = document.querySelectorAll("input, textarea");

inputs.forEach(i=>{
  i.addEventListener("input", ()=>{
    btn.disabled = [...inputs].some(x => x.value.trim() === "");
  });
});

btn.onclick = async () => {

  await addDoc(collection(db,"applications"),{
    fullName: name.value,
    mobile: mobile.value,
    alternate: alt.value,
    address: address.value,
    status:"new",
    createdAt: serverTimestamp()
  });

  alert("Application Submitted");
  location.reload();
};
</script>

</body>
</html>
