<!DOCTYPE html>
<html>
<head>
    <title>New Applications</title>
    <link rel="stylesheet" href="style.css">
    <script type="module">
        import { db } from "./firebase-init.js";
        import {
            collection,
            getDocs,
            query,
            orderBy
        } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        const container = document.getElementById("list");

        async function loadApplications() {
            const q = query(
                collection(db, "applications"),
                orderBy("createdAt", "desc")
            );

            const snapshot = await getDocs(q);

            snapshot.forEach((docSnap) => {
                const data = docSnap.data();

                const div = document.createElement("div");
                div.className = "card";

                div.innerHTML = `
                    <p><b>Name:</b> ${data.fullName}</p>
                    <p><b>Mobile:</b> ${data.mobile}</p>
                    <p><b>Alternate:</b> ${data.alternate}</p>
                    <p><b>Location:</b> ${data.location}</p>
                `;

                container.appendChild(div);
            });
        }

        window.onload = loadApplications;
    </script>
</head>
<body>

<header>
    <h2>New Applications</h2>
</header>

<div id="list" class="vertical-list"></div>

</body>
</html>
